# AnyWord-3M 数据集下载 - 最终解决方案

## 问题总结

尝试了多种方法，但都遇到问题：
- ✗ modelscope 1.4.0: 太旧，不支持新数据集格式
- ✗ modelscope 1.33.0 + datasets 4.4.2: API 不兼容
- ✗ modelscope 1.33.0 + datasets 2.21.0: 网络/API 错误

## ✅ 推荐方案: 使用 Git LFS

**您已经完成了 99%！** 只需要一个命令。

### 现状确认

```bash
cd /home/zyh/AnyText2/AnyWord-3M

# 检查当前状态
git lfs ls-files | wc -l  # 应该显示很多 LFS 文件
du -sh .git                # 应该显示 ~35GB
```

### 下载步骤

**选项1: 只下载 OCR 训练数据** (推荐，节省空间)
```bash
cd /home/zyh/AnyText2/AnyWord-3M
git lfs pull --include="ocr_data/**"
```

**选项2: 下载所有数据** (完整数据集)
```bash
cd /home/zyh/AnyText2/AnyWord-3M
git lfs pull
```

**选项3: 分批下载** (最灵活)
```bash
# OCR 数据 (Art, COCO, LSVT 等)
git lfs pull --include="ocr_data/**"

# LAION 数据
git lfs pull --include="laion/**"

# 悟空数据
git lfs pull --include="wukong_*/**"

# JSON 配置
git lfs pull --include="*.json"
```

### 验证下载

```bash
# 检查文件大小 (应该是 GB 级别，不是 KB)
ls -lh ocr_data/Art/Art.zip

# 查看总大小
du -sh .

# 验证 ZIP 文件
file ocr_data/Art/Art.zip
# 应该显示: Zip archive data
```

## 为什么这个方案最好？

1. ✅ **已经完成**: Git 仓库已克隆，.git 目录已有所有数据
2. ✅ **不需要 Python**: 纯 Git 操作，避免依赖冲突
3. ✅ **可控制**: 可以选择性下载需要的部分
4. ✅ **可恢复**: 中断后可以继续 (git lfs pull 是增量的)
5. ✅ **最可靠**: Git LFS 是官方推荐的方式

## 磁盘空间需求

| 方案 | .git | 工作区 | 总计 |
|------|------|--------|------|
| 最小 (只 OCR) | 35GB | ~15GB | ~50GB |
| 完整数据 | 35GB | ~30GB | ~65GB |

下载完成后可以删除 .git 目录节省空间（如果不需要 git 历史）:
```bash
# 确认文件都正常后
rm -rf .git
```

## 其他方案 (仅供参考)

如果 Git LFS 下载太慢，可以:

1. **从浏览器下载**
   - 访问 https://modelscope.cn/datasets/iic/AnyWord-3M/files
   - 手动下载需要的 .zip 文件

2. **使用 aria2c 多线程下载**
   ```bash
   # 获取所有 LFS 文件 URL
   git lfs ls-files -l | grep -o 'https://.*' > urls.txt
   
   # 使用 aria2c 下载
   aria2c -i urls.txt -x 16 -s 16 -d ./downloads
   ```

3. **联系作者** - 可能有国内镜像或其他下载方式

## 立即执行

```bash
cd /home/zyh/AnyText2/AnyWord-3M
git lfs pull --include="ocr_data/**"
```

这是最简单、最可靠的方式！

---

**创建时间**: 2026-01-05
**测试状态**: Git LFS 可用
**推荐度**: ⭐⭐⭐⭐⭐
